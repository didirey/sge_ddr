# PR0601

* Archivo manifest.py:

```python
# -*- coding: utf-8 -*-
{
    'name': "Gestion Productos",

    'summary': """
        Modulo para gestionar productos.    
    """,

    'description': """
        
    """,

    'author': "My Company",
    'website': "https://www.yourcompany.com",

    # Categories can be used to filter modules in modules listing
    # Check https://github.com/odoo/odoo/blob/16.0/odoo/addons/base/data/ir_module_category_data.xml
    # for the full list
    'category': 'Productivity',
    'version': '0.1',

    # any module necessary for this one to work correctly
    'depends': ['base'],

    # always loaded
    'data': [
        'security/ir.model.access.csv',
        'views/views.xml',
        'views/templates.xml',
    ],
    # only loaded in demonstration mode
    'demo': [
        'demo/demo.xml',
    ],
}

```

* Archivo models.py:

```python
# -*- coding: utf-8 -*-

from odoo import models, fields, api


class gestion_productos(models.Model):
    _name = 'gestion_productos.gestion_productos'
    _description = 'gestion_productos.gestion_productos'

    # --- Información básica del producto ---
    name = fields.Char(
        string='Nombre del Producto',
        required=True
    )
    description = fields.Text(
        string='Descripción del Producto'
    )
    code = fields.Char(
        string='Código de Producto',
        required=True, # Campo obligatorio
        index=True,
        copy=False # El código no se copia al duplicar el registro
    )
    image = fields.Image(
        string='Imagen del Producto',
        max_width=128,
        max_height=128
    )

    # --- Categoría y tipo de producto ---
    category = fields.Selection([
        ('jardin', 'Jardín'),
        ('hogar', 'Hogar'),
        ('electrodomesticos', 'Electrodomésticos')
    ], string='Categoría', required=True)
    
    is_featured = fields.Boolean(
        string='Producto Destacable' # Tipo de producto
    )

    # --- Información económica ---
    sale_price = fields.Float(
        string='Precio de Venta',
        digits='Product Price', # Utiliza la precisión estándar para precios
        required=True
    )
    stock_available = fields.Integer(
        string='Stock Disponible',
        required=True
    )

    # --- Fechas y disponibilidad ---
    create_date = fields.Datetime(
        string='Fecha de Creación',
        readonly=True, # Campo de solo lectura
        default=fields.Datetime.now # Valor por defecto: fecha actual
    )
    write_date = fields.Datetime(
        string='Fecha de Última Actualización',
        readonly=True
    )

    # --- Información adicional ---
    active = fields.Boolean(
        string='Activo',
        default=True, # Valor por defecto: True
    )
    weight = fields.Float(
        string='Peso del Producto (kg)',
        digits=(10, 2)
    )

```

* Archivo views.xml:

```xml
<odoo>
    <data>
        <record id="product_info_view_tree" model="ir.ui.view">
            <field name="name">product.info.view.tree</field>
            <field name="model">product.info</field>
            <field name="arch" type="xml">
                <tree string="Listado de Productos">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="category"/>
                    <field name="sale_price"/>
                    <field name="stock_available"/>
                    <field name="active" widget="toggle_button"/>
                </tree>
            </field>
        </record>

        <record id="product_info_view_form" model="ir.ui.view">
            <field name="name">product.info.view.form</field>
            <field name="model">product.info</field>
            <field name="arch" type="xml">
                <form string="Ficha de Producto">
                    <sheet>
                        <field name="image" widget="image" class="oe_avatar"/>
                        <div class="oe_title">
                            <h1>
                                <field name="name" placeholder="Nombre del Producto"/>
                            </h1>
                        </div>
                        
                        <group name="group_general_info">
                            <group>
                                <field name="code"/>
                                <field name="category"/>
                                <field name="is_featured"/>
                                <field name="weight"/>
                            </group>
                            <group>
                                <field name="sale_price"/>
                                <field name="stock_available"/>
                                <field name="active" invisible="1"/> </group>
                        </group>
                        
                        <notebook>
                            <page name="description_page" string="Descripción del Producto">
                                <field name="description"/>
                            </page>
                            
                            <page name="audit_dates" string="Fechas y Disponibilidad">
                                <group>
                                    <field name="create_date" readonly="1"/>
                                    <field name="write_date" readonly="1"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="product_info_action" model="ir.actions.act_window">
            <field name="name">Catálogo de Productos</field>
            <field name="res_model">product.info</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Crea el primer producto para empezar a gestionar tu catálogo.
                </p>
            </field>
        </record>

        <menuitem 
            name="Productos" 
            id="menu_product_root" 
            sequence="10"/>

        <menuitem 
            name="Listado de Productos" 
            id="menu_product_info_list" 
            parent="menu_product_root" 
            action="product_info_action" 
            sequence="10"/>

    </data>
</odoo>
```

* templates.xml:

```xml
<odoo>
    <data>
        <template id="listing">
          <ul>
            <li t-foreach="objects" t-as="object">
              <a t-attf-href="#{ root }/objects/#{ object.id }">
                <t t-esc="object.display_name"/>
              </a>
            </li>
          </ul>
        </template>
        <template id="object">
          <h1><t t-esc="object.display_name"/></h1>
          <dl>
            <t t-foreach="object._fields" t-as="field">
              <dt><t t-esc="field"/></dt>
              <dd><t t-esc="object[field]"/></dd>
            </t>
          </dl>
        </template>
    </data>
</odoo>
```

* Archivo ir.model.access.csv:

```csv
id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_gestion_productos_gestion_productos,gestion_productos.gestion_productos,model_gestion_productos_gestion_productos,base.group_user,1,1,1,1
```

Funcionamiento:

![Error Imagen](func1.png)

